# р╕Др╕╣р╣Ир╕бр╕╖р╕нр╕Бр╕▓р╕гр╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╣Вр╕Др╣Йр╕Фр╣Ар╕Вр╣Йр╕▓ Server ЁЯЪА

## ЁЯУЛ р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Бр╕▓р╕гр╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╣Вр╕Др╣Йр╕Фр╕Ир╕▓р╕Б Local р╣Др╕Ыр╕вр╕▒р╕З Server

### р╕Вр╕▒р╣Йр╕Щр╕Чр╕╡р╣И 1: р╣Ар╕Хр╕гр╕╡р╕вр╕бр╣Вр╕Др╣Йр╕Фр╣Гр╕Щ Local PC ЁЯТ╗

```bash
# 1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕кр╕Цр╕▓р╕Щр╕░р╣Др╕Яр╕ер╣Мр╕Чр╕╡р╣Ир╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З
git status

# 2. р╣Ар╕Юр╕┤р╣Ир╕бр╣Др╕Яр╕ер╣Мр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕Чр╕╡р╣Ир╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З
git add .

# 3. Commit р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╕Юр╕гр╣Йр╕нр╕бр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕нр╕Шр╕┤р╕Ър╕▓р╕в
git commit -m "Update: [р╕нр╕Шр╕┤р╕Ър╕▓р╕вр╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З]"

# 4. Push р╣Др╕Ыр╕вр╕▒р╕З Git repository
git push origin main
```

### р╕Вр╕▒р╣Йр╕Щр╕Чр╕╡р╣И 2: р╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕н Server ЁЯМР

```bash
# SSH р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣И server (р╣Бр╕Чр╕Щр╕Чр╕╡р╣Ир╕Фр╣Йр╕зр╕в IP р╣Бр╕ер╕░ username р╕Вр╕нр╕Зр╕Др╕╕р╕У)
ssh username@192.168.1.54

# р╕лр╕гр╕╖р╕нр╕Цр╣Йр╕▓р╣Гр╕Кр╣Й key file
ssh -i /path/to/your-key.pem username@192.168.1.54
```

### р╕Вр╕▒р╣Йр╕Щр╕Чр╕╡р╣И 3: р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╣Вр╕Др╣Йр╕Фр╣Гр╕Щ Server ЁЯУе

```bash
# р╣Ар╕Вр╣Йр╕▓р╣Др╕Ыр╕вр╕▒р╕Зр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣Мр╣Вр╕Ыр╕гр╣Ар╕Ир╕Бр╕Хр╣М
cd golfcar-maintenance

# Pull р╣Вр╕Др╣Йр╕Фр╣Гр╕лр╕бр╣Ир╕Ир╕▓р╕Б Git
git pull origin main

# р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З dependencies р╣Гр╕лр╕бр╣И (р╕Цр╣Йр╕▓р╕бр╕╡)
npm install

# Generate Prisma client р╣Гр╕лр╕бр╣И
npx prisma generate

# Build application р╣Гр╕лр╕бр╣И
npm run build
```

### р╕Вр╕▒р╣Йр╕Щр╕Чр╕╡р╣И 4: р╕гр╕╡р╕кр╕Хр╕▓р╕гр╣Мр╕Чр╣Бр╕нр╕Ыр╕Юр╕ер╕┤р╣Ар╕Др╕Кр╕▒р╕Щ ЁЯФД

```bash
# р╕лр╕вр╕╕р╕Фр╣Бр╕нр╕Ыр╕Юр╕ер╕┤р╣Ар╕Др╕Кр╕▒р╕Щр╕Чр╕╡р╣Ир╕гр╕▒р╕Щр╕нр╕вр╕╣р╣И
pm2 stop golfcart-app

# р╣Ар╕гр╕┤р╣Ир╕бр╣Бр╕нр╕Ыр╕Юр╕ер╕┤р╣Ар╕Др╕Кр╕▒р╕Щр╣Гр╕лр╕бр╣И
pm2 start golfcart-app

# р╕лр╕гр╕╖р╕нр╕гр╕╡р╕кр╕Хр╕▓р╕гр╣Мр╕Чр╣Бр╕Ър╕Ър╣Ар╕Фр╕╡р╕вр╕з
pm2 restart golfcart-app
```

### р╕Вр╕▒р╣Йр╕Щр╕Чр╕╡р╣И 5: р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щ тЬЕ

```bash
# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕кр╕Цр╕▓р╕Щр╕░ PM2
pm2 status

# р╕Фр╕╣ logs р╣Ар╕Юр╕╖р╣Ир╕нр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ error
pm2 logs golfcart-app

# р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕н
curl http://localhost:8080
```

## ЁЯЪА р╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣Мр╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤

### р╕кр╕гр╣Йр╕▓р╕Зр╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣Мр╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕Зр╣Ир╕▓р╕вр╣Ж

р╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣М `update-server.sh`:

```bash
#!/bin/bash
echo "ЁЯЪА Starting server update..."

# Pull latest code
echo "ЁЯУе Pulling latest code..."
git pull origin main

# Install dependencies
echo "ЁЯУж Installing dependencies..."
npm install

# Generate Prisma client
echo "ЁЯФз Generating Prisma client..."
npx prisma generate

# Build application
echo "ЁЯФи Building application..."
npm run build

# Restart application
echo "ЁЯФД Restarting application..."
pm2 restart golfcart-app

# Check status
echo "тЬЕ Checking application status..."
pm2 status

echo "ЁЯОЙ Update completed successfully!"
echo "ЁЯМР Application is running at: http://192.168.1.54:8080"
```

### р╕зр╕┤р╕Шр╕╡р╣Гр╕Кр╣Йр╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣М:

```bash
# р╕Чр╕│р╣Гр╕лр╣Йр╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣Мр╕кр╕▓р╕бр╕▓р╕гр╕Цр╕гр╕▒р╕Щр╣Др╕Фр╣Й
chmod +x update-server.sh

# р╕гр╕▒р╕Щр╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣М
./update-server.sh
```

## ЁЯФз р╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Чр╕╡р╣Ир╕бр╕╡р╕Ыр╕гр╕░р╣Вр╕вр╕Кр╕Щр╣М

### р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕кр╕Цр╕▓р╕Щр╕░
```bash
# р╕Фр╕╣р╕кр╕Цр╕▓р╕Щр╕░ PM2
pm2 status

# р╕Фр╕╣ logs р╣Бр╕Ър╕Ъ real-time
pm2 logs golfcart-app --lines 50

# р╕Фр╕╣р╕Бр╕▓р╕гр╣Гр╕Кр╣Й memory р╣Бр╕ер╕░ CPU
pm2 monit
```

### р╕Ир╕▒р╕Фр╕Бр╕▓р╕г PM2
```bash
# р╕гр╕╡р╕кр╕Хр╕▓р╕гр╣Мр╕Чр╣Бр╕нр╕Ы
pm2 restart golfcart-app

# р╕лр╕вр╕╕р╕Фр╣Бр╕нр╕Ы
pm2 stop golfcart-app

# р╣Ар╕гр╕┤р╣Ир╕бр╣Бр╕нр╕Ы
pm2 start golfcart-app

# р╕ер╕Ър╣Бр╕нр╕Ыр╕нр╕нр╕Бр╕Ир╕▓р╕Б PM2
pm2 delete golfcart-app
```

### р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е
```bash
# р╣Ар╕Ыр╕┤р╕Ф Prisma Studio
npm run db:studio

# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ schema
npx prisma db pull
```

## ЁЯЪи р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕Вр╕Ыр╕▒р╕Нр╕лр╕▓р╕Чр╕╡р╣Ир╕Юр╕Ър╕Ър╣Ир╕нр╕в

### р╕Ыр╕▒р╕Нр╕лр╕▓: р╣Бр╕нр╕Ыр╣Др╕бр╣Ир╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щ
```bash
# р╕ер╕Ъ PM2 process р╣Ар╕Бр╣Ир╕▓
pm2 delete golfcart-app

# Build р╣Гр╕лр╕бр╣И
npm run build

# р╣Ар╕гр╕┤р╣Ир╕бр╣Гр╕лр╕бр╣И
pm2 start npm --name golfcart-app -- run start
```

### р╕Ыр╕▒р╕Нр╕лр╕▓: Database connection error
```bash
# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ MongoDB
sudo systemctl status mongod

# р╕гр╕╡р╕кр╕Хр╕▓р╕гр╣Мр╕Ч MongoDB
sudo systemctl restart mongod

# Generate Prisma client р╣Гр╕лр╕бр╣И
npx prisma generate
npx prisma db push
```

### р╕Ыр╕▒р╕Нр╕лр╕▓: Port р╕Цр╕╣р╕Бр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ
```bash
# р╕лр╕▓ process р╕Чр╕╡р╣Ир╣Гр╕Кр╣Й port 8080
lsof -i :8080

# р╕Жр╣Ир╕▓ process (р╣Бр╕Чр╕Щр╕Чр╕╡р╣И PID р╕Фр╣Йр╕зр╕вр╣Ар╕ер╕Вр╕Чр╕╡р╣Ир╣Др╕Фр╣Й)
kill -9 PID
```

## ЁЯУЭ Checklist р╕Бр╕▓р╕гр╕нр╕▒р╕Ыр╣Ар╕Фр╕Х

- [ ] Commit р╣Бр╕ер╕░ push р╣Вр╕Др╣Йр╕Фр╣Гр╕Щ local
- [ ] SSH р╣Ар╕Вр╣Йр╕▓ server
- [ ] Pull р╣Вр╕Др╣Йр╕Фр╣Гр╕лр╕бр╣И
- [ ] npm install
- [ ] npx prisma generate
- [ ] npm run build
- [ ] pm2 restart golfcart-app
- [ ] р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ pm2 status
- [ ] р╕Чр╕Фр╕кр╕нр╕Ър╣Ар╕зр╣Зр╕Ър╣Др╕Лр╕Хр╣Мр╕Чр╕╡р╣И http://192.168.1.54:8080

## ЁЯОп Tips р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕Чр╕╡р╣Ир╕Ыр╕ер╕нр╕Фр╕ар╕▒р╕в

1. **Backup р╕Бр╣Ир╕нр╕Щр╕нр╕▒р╕Ыр╣Ар╕Фр╕Х**: р╕кр╕│р╕гр╕нр╕Зр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╣Ир╕нр╕Щр╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╣Гр╕лр╕Нр╣И
2. **р╕Чр╕Фр╕кр╕нр╕Ър╣Гр╕Щ Local**: р╕Чр╕Фр╕кр╕нр╕Ър╣Гр╕лр╣Йр╣Бр╕Щр╣Ир╣Гр╕Ир╕зр╣Ир╕▓р╣Вр╕Др╣Йр╕Фр╕Чр╕│р╕Зр╕▓р╕Щр╣Гр╕Щ local р╕Бр╣Ир╕нр╕Щ
3. **р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╣Гр╕Щр╣Ар╕зр╕ер╕▓р╕Чр╕╡р╣Ир╣Ар╕лр╕бр╕▓р╕░р╕кр╕б**: р╕лр╕ер╕╡р╕Бр╣Ар╕ер╕╡р╣Ир╕вр╕Зр╣Ар╕зр╕ер╕▓р╕Чр╕╡р╣Ир╕бр╕╡р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Ар╕вр╕нр╕░
4. **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ logs**: р╕Фр╕╣ logs р╕лр╕ер╕▒р╕Зр╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╣Ар╕Юр╕╖р╣Ир╕нр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ error
5. **р╕бр╕╡ rollback plan**: р╣Ар╕Хр╕гр╕╡р╕вр╕бр╣Бр╕Ьр╕Щр╕вр╣Йр╕нр╕Щр╕Бр╕ер╕▒р╕Ър╕Цр╣Йр╕▓р╕бр╕╡р╕Ыр╕▒р╕Нр╕лр╕▓

## ЁЯУЮ р╕Хр╕┤р╕Фр╕Хр╣Ир╕нр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Др╕зр╕▓р╕бр╕Кр╣Ир╕зр╕вр╣Ар╕лр╕ер╕╖р╕н

р╕лр╕▓р╕Бр╕Юр╕Ър╕Ыр╕▒р╕Нр╕лр╕▓р╣Гр╕Щр╕Бр╕▓р╕гр╕нр╕▒р╕Ыр╣Ар╕Фр╕Х р╕кр╕▓р╕бр╕▓р╕гр╕Ц:
1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ logs: `pm2 logs golfcart-app`
2. р╕Фр╕╣р╕кр╕Цр╕▓р╕Щр╕░: `pm2 status`
3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ MongoDB: `sudo systemctl status mongod`